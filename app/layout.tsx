import type { Metadata } from "next";
import "./globals.scss";
import Navigation from "@/components/layout/Navigation";
import SideBar from "@/components/layout/SideBar";
import FooterNav from "@/components/layout/FooterNav";
import { headers } from "next/headers";
import { Toaster } from "@/components/ui/toaster";
import ClientProviders from "@/components/ClientProviders";
import { cookieToInitialState } from 'wagmi'

import { config } from '@/config'
import AppKitProvider from '@/context'
import { SelectedNameProvider } from "@/SelectedNameContext" // Import the context provider

export const metadata: Metadata = {
  title: "Create Next App",
  description: "Generated by create next app",
};

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  const initialState = cookieToInitialState(config, headers().get('cookie'))

  return (
    <html lang="en">
      <body className="font-guaruja">
        <ClientProviders>
          <AppKitProvider initialState={initialState}>
            <SelectedNameProvider> {/* Wrap with SelectedNameProvider */}
              <div className="flex w-full h-auto relative">
                <SideBar />
                <div className="relative w-full h-auto">
                  <Navigation />
                  <div className="scrollbar-hide overflow-y-auto h-[100vh] w-full overflow-x-hidden pt-20">
                    {children}
                  </div>
                  <FooterNav />
                </div>
              </div>
            </SelectedNameProvider>
          </AppKitProvider>
        </ClientProviders>
        <Toaster />
      </body>
    </html>
  );
}
